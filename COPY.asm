CHRTAB	EQU &1500	; START OF TABLES
BL0	EQU &1C00	; GEORGE
BL1	EQU &1C00+&558	; RALPH
BL2	EQU &1C00+(&558*2)	; LIZZY
BLR0	EQU &1C00+(&558*3)	; GRORGE REVERSED
BLR1	EQU &1C00+(&558*4)	; RALPH REVERSED
BLR2	EQU &1C00+(&558*5)	; LIZZY REVERSED

BUF0	EQU &CCA0; 48*6 TO STORE
BUF1	EQU &CCA0+(48*6)
BUF2	EQU &CCA0+(48*12)	; &33C

APE0	EQU SO0*64+BANK
APE1	EQU SO1*64+BANK
APE2	EQU SO2*64+BANK
	
	; X=SPRITE NUMBER 0,1,2
PLAYCHAR1	DB 0,0,0
KEEPX	DB 0
CREATE	
	STX KEEPX
	LDY FRAME,X	; ACTUAL FRAME
	LDA DIR,X
	BPL NORW
	LDA PLAYCHAR1,X
	TAX
	INX
	INX
	INX
	JMP NORW1
NORW	LDA PLAYCHAR1,X	
	TAX
NORW1	LDA WHICHT,X		;,X
	STA WHCR+2	; HIGHBYTE
	LDA TIM36L,Y	; Y=FRAME
	CLC
	ADC BLOCKML,X
	STA ALOOP+1
	LDA BLOCKM,X	; REVERSED
	ADC TIM36H,Y	; Y=FRAME
	STA ALOOP+2
	LDX KEEPX
	LDA BUFTBL,X	; X 0 TO 5
	STA SM
	LDA BUFTBH,X	; X 0 TO 5
	STA SM+1
	LDA #5
	STA LX


BLOOP	LDA #5
	STA LY
ALOOP	LDX &FFFF	
	LDA CHRTAB,X
	STA CM+0
WHCR	LDA CHRTAB+&100,X	
	STA CM+1
	LDY #0
	LDA #255
	LDA (CM),Y
	STA (SM),Y
	LDY #1
	LDA (CM),Y
	LDY #1*6
	STA (SM),Y
	LDY #2
	LDA (CM),Y
	LDY #2*6
	STA (SM),Y
	LDY #3
	LDA (CM),Y
	LDY #3*6
	STA (SM),Y
	LDY #4
	LDA (CM),Y
	LDY #4*6
	STA (SM),Y
	LDY #5
	LDA (CM),Y
	LDY #5*6
	STA (SM),Y
	LDY #6
	LDA (CM),Y
	LDY #6*6
	STA (SM),Y
	LDY #7
	LDA (CM),Y
	LDY #7*6
	STA (SM),Y
	INC SM
	BNE SKI1
	INC SM+1
SKI1	INC ALOOP+1
	BNE SKI2
	INC ALOOP+2
SKI2	DEC LY
	BPL ALOOP
	LDA SM
	CLC
	ADC #&30-6
	STA SM
	BCC SKI3
	INC SM+1
SKI3	DEC LX
	BPL BLOOP
	RTS

WHICHT	DB <CHRTAB+&100,<CHRTAB+&200
	DB <CHRTAB+&300,<CHRTAB+&400
	DB <CHRTAB+&500,<CHRTAB+&600

BLOCKM	DB <BL0,<BL1,<BL2
	DB <BLR0,<BLR1,<BLR2

BLOCKML DB >BL0,>BL1,>BL2
	DB >BLR0,>BLR1,>BLR2

BUFTBL	DB >BUF0,>BUF1,>BUF2
	DB >BUF0,>BUF1,>BUF2

BUFTBH	DB <BUF0,<BUF1,<BUF2
	DB <BUF0,<BUF1,<BUF2

TIM36L	DB >&000,>&024,>&048,>&06C
	DB >&090,>&0B4,>&0D8,>&0FC
	DB >&120,>&144,>&168,>&18C
	DB >&1B0,>&1D4,>&1F8,>&21C
	DB >&240,>&264,>&288,>&2AC
	DB >&2D0,>&2F4,>&318,>&33C
	DB >&360,>&384,>&3A8,>&3CC
	DB >&3F0,>&414,>&438,>&45C
	DB >&480,>&4A4,>&4C8,>&4EC
	DB >&510,>&534,>&558,>&57C
	DB >&5A0,>&5C4,>&5E8,>&60C

TIM36H	DB <&000,<&024,<&048,<&06C
	DB <&090,<&0B4,<&0D8,<&0FC
	DB <&120,<&144,<&168,<&18C
	DB <&1B0,<&1D4,<&1F8,<&21C
	DB <&240,<&264,<&288,<&2AC
	DB <&2D0,<&2F4,<&318,<&33C
	DB <&360,<&384,<&3A8,<&3CC
	DB <&3F0,<&414,<&438,<&45C
	DB <&480,<&4A4,<&4C8,<&4EC
	DB <&510,<&534,<&558,<&57C
	DB <&5A0,<&5C4,<&5E8,<&60C	
